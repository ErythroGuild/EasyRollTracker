<Ui xmlns="http://www.blizzard.com/wow/ui/"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd" >
	<Script file="EasyRollTracker.lua"/>
	
	<Button name="eRollTracker_Template_Button_Text" virtual="true">
		<NormalFont style="GameFontNormal"/>
		<PushedTextOffset x="0.2" y="-0.8"/>

		<NormalTexture setAllPoints="true">
			<Color r="0.05" g="0.05" b="0.05" a="0.80"/>
		</NormalTexture>
		<PushedTexture setAllPoints="true">
			<Color r="0.10" g="0.25" b="0.35" a="1.00"/>
		</PushedTexture>
		<HighlightTexture setAllPoints="true" alphaMode="ADD">
			<Color r="0.80" g="0.80" b="0.80" a="0.40"/>
		</HighlightTexture>
	</Button>

	<!--TODO: change `hidden` to "true" -->
	<Frame name="eRollTrackerFrame" parent="UIParent"
		hidden="false"
		frameStrata="HIGH"
		movable="true"
		resizable="true"
		clampedToScreen="true"
		enableMouse="true">
		<Size><AbsDimension x="250" y="280"/></Size>
		<ResizeBounds>
			<minResize><AbsDimension x="235" y="220"/></minResize>
			<maxResize><AbsDimension x="300" y="580"/></maxResize>
		</ResizeBounds>
		<Anchors><Anchor point="CENTER"/></Anchors>
		
		<Scripts>
			<OnLoad>
				--tinsert(UISpecialFrames, self:GetName());	-- make frame closeable with `Esc` key
				self:RegisterForDrag("LeftButton");			-- make frame draggable
			</OnLoad>
			<OnDragStart>self:StartMoving();</OnDragStart>
			<OnDragStop>self:StopMovingOrSizing();</OnDragStop>
		</Scripts>

		<Layers>
			<Layer level="ARTWORK">
				<Texture setAllPoints="true">
					<Color r="0.05" g="0.05" b="0.05" a="0.70"/>
				</Texture>
				<FontString name="$parent_TextTitle" text="easy Roll Tracker v2.0" inherits="GameFontNormal">
					<Anchors><Anchor point="TOP" y="-8"/></Anchors>
				</FontString>
			</Layer>
		</Layers>

		<Frames>
			<Button name="$parent_ButtonClose">
				<Size x="20" y="20"/>
				<Anchors><Anchor point="TOPRIGHT" x="-6" y="-6"/></Anchors>
				<NormalTexture file="Interface\AddOns\EasyRollTracker\rc\button-close.tga">
					<Color r="0.85" g="0.85" b="0.85" a="0.90"/>
				</NormalTexture>
				<PushedTexture file="Interface\AddOns\EasyRollTracker\rc\button-close.tga">
					<Color r="0.59" g="0.01" b="0.01" a="1.00"/>
				</PushedTexture>
				<HighlightTexture alphaMode="BLEND" file="Interface\AddOns\EasyRollTracker\rc\button-close.tga">
					<Color r="0.99" g="0.21" b="0.21" a="0.40"/>
				</HighlightTexture>
				<!-- HSL: (0, 97%, 60%) -> (0, 97%, 30%) -->

				<Scripts>
					<OnClick>eRollTrackerFrame:Hide();</OnClick>
				</Scripts>
			</Button>

			<Button name="$parent_ButtonResize">
				<Size x="20" y="20"/>
				<Anchors><Anchor point="BOTTOMRIGHT" x="-4" y="4"/></Anchors>
				<NormalTexture file="Interface\AddOns\EasyRollTracker\rc\button-resize.tga">
					<Color r="0.85" g="0.85" b="0.85" a="0.90"/>
				</NormalTexture>
				<PushedTexture file="Interface\AddOns\EasyRollTracker\rc\button-resize.tga">
					<Color r="0.01" g="0.48" b="0.59" a="1.00"/>
				</PushedTexture>
				<HighlightTexture alphaMode="BLEND" file="Interface\AddOns\EasyRollTracker\rc\button-resize.tga">
					<Color r="0.21" g="0.85" b="0.99" a="0.40"/>
				</HighlightTexture>
				<!-- HSL: (191, 97%, 60%) -> (191, 97%, 30%) -->

				<Scripts>
					<OnMouseDown>eRollTrackerFrame:StartSizing("BOTTOMRIGHT");</OnMouseDown>
					<OnMouseUp>eRollTrackerFrame:StopMovingOrSizing();</OnMouseUp>
				</Scripts>
			</Button>

			<!-- frameLevel forces FrameItem to be drawn in front of IconItem -->
			<Frame name="$parent_FrameItem" frameLevel="2" enableMouse="true">
				<Size x="55" y="55"/>
				<Anchors><Anchor point="TOPLEFT" x="14" y="-36"/></Anchors>

				<Scripts>
					<OnReceiveDrag>
						local type, itemID, itemLink = GetCursorInfo();
						if type=="item" and itemLink then
							eRollTrackerFrame_EditRoll:SetText(itemLink);
							ClearCursor();
						end
					</OnReceiveDrag>
					<OnMouseUp>
						local type, itemID, itemLink = GetCursorInfo();
						if type=="item" and itemLink then
							eRollTrackerFrame_EditRoll:SetText(itemLink);
							ClearCursor();
						end
					</OnMouseUp>
				</Scripts>

				<Layers>
					<Layer level="OVERLAY">
						<Texture setAllPoints="true" file="Interface\AddOns\EasyRollTracker\rc\frame-item.tga">
							<Color r="0.85" g="0.85" b="0.85" a="1.00"/>
						</Texture>
					</Layer>
					<Layer level="HIGHLIGHT">
						<Texture setAllPoints="true" alphaMode="ADD" file="Interface\AddOns\EasyRollTracker\rc\frame-item.tga">
							<Color r="0.45" g="0.45" b="0.45" a="0.40"/>
						</Texture>
					</Layer>
				</Layers>

				<Frames>
					<Frame name="$parent_IconItem" frameLevel="1">
						<Size x="50" y="50"/>
						<Anchors><Anchor point="CENTER"/></Anchors>
						<Layers>
							<Layer level="ARTWORK">
								<Texture setAllPoints="true">
									<Color r="0.05" g="0.05" b="0.05" a="0.80"/>
								</Texture>
							</Layer>
						</Layers>
					</Frame>
				</Frames>
			</Frame>

			<EditBox name="$parent_EditRoll"
				autoFocus="false"
				historyLines="1"
				multiLine="false">
				<Anchors>
					<Anchor point="BOTTOM" relativeTo="$parent_FrameItem" relativePoint="RIGHT" y="2"/>
					<Anchor point="TOP" relativeTo="$parent_FrameItem" relativePoint="RIGHT" y="26"/>
					<Anchor point="LEFT" relativeTo="$parent_FrameItem" relativePoint="RIGHT" x="6"/>
					<Anchor point="RIGHT" relativeTo="$parent" relativePoint="RIGHT" x="-18"/>
				</Anchors>

				<Scripts>
					<OnEscapePressed>self:ClearFocus();</OnEscapePressed>
					<OnReceiveDrag>
						local type, itemID, itemLink = GetCursorInfo();
						if type=="item" and itemLink then
							self:SetText(itemLink);
							ClearCursor();
						end
					</OnReceiveDrag>
					<OnMouseUp>
						local type, itemID, itemLink = GetCursorInfo();
						if type=="item" and itemLink then
							self:SetText(itemLink);
							ClearCursor();
						end
					</OnMouseUp>
					<!-- <OnLoad>self:RegisterEvent("GLOBAL_MOUSE_DOWN");</OnLoad>
					<OnEvent>
						print("clicked")
						local type, itemID, itemLink = GetCursorInfo();
						print("type")
						if type=="item" and itemLink then
							self:SetText(itemLink);
							ClearCursor();
						end
					</OnEvent> -->
				</Scripts>
				
				<FontString inherits="ChatFontNormal"/>
				<HighlightColor r="0.95" g="0.95" b="0.95" a="1.00"/>
				<TextInsets left="4" right="4"/>
				
				<Layers>
					<Layer level="ARTWORK">
						<Texture setAllPoints="true">
							<Color r="0.05" g="0.05" b="0.05" a="0.80"/>
						</Texture>
					</Layer>
				</Layers>
			</EditBox>

			<Frame name="$parent_ButtonsRoll">
				<Anchors>
					<Anchor point="BOTTOM" relativeTo="$parent_FrameItem" relativePoint="RIGHT" y="-26"/>
					<Anchor point="TOP" relativeTo="$parent_FrameItem" relativePoint="RIGHT" y="-2"/>
					<Anchor point="LEFT" relativeTo="$parent_FrameItem" relativePoint="RIGHT" x="6"/>
					<Anchor point="RIGHT" relativeTo="$parent" relativePoint="RIGHT" x="-18"/>
				</Anchors>

				<Frames>
					<Button name="$parent_ButtonOpenRoll" text="Open Roll" inherits="eRollTracker_Template_Button_Text">
						<Anchors>
							<Anchor point="TOP"/>
							<Anchor point="BOTTOM"/>
							<Anchor point="LEFT"/>
							<Anchor point="RIGHT" relativePoint="TOP" x="-2"/>
						</Anchors>
					</Button>

					<Button name="$parent_ButtonCloseRoll" text="Close Roll" inherits="eRollTracker_Template_Button_Text">
						<Anchors>
							<Anchor point="TOP"/>
							<Anchor point="BOTTOM"/>
							<Anchor point="RIGHT"/>
							<Anchor point="LEFT" relativePoint="TOP" x="2"/>
						</Anchors>
					</Button>
				</Frames>
			</Frame>
			
			<Button name="$parent_ButtonClear" text="Clear All" inherits="eRollTracker_Template_Button_Text">
				<Size x="90" y="24"/>
				<Anchors>
					<Anchor point="BOTTOM" y="14"/>
				</Anchors>
			</Button>
			
			<Button name="$parent_ButtonScrollUp" inherits="eRollTracker_Template_Button_Text">
				<Size x="24" y="24"/>
				<Anchors>
					<Anchor point="BOTTOM" y="14"/>
					<Anchor point="LEFT" x="22"/>
				</Anchors>

				<Layers>
					<Layer level="OVERLAY">
						<Texture setAllPoints="true" file="Interface/AddOns/EasyRollTracker/rc/button-up.tga">
							<Color r="0.85" g="0.85" b="0.85" a="1.00"/>
						</Texture>
					</Layer>
				</Layers>
			</Button>
			<Button name="$parent_ButtonScrollDown" inherits="eRollTracker_Template_Button_Text">
				<Size x="24" y="24"/>
				<Anchors>
					<Anchor point="BOTTOM" y="14"/>
					<Anchor point="LEFT" relativeTo="$parent_ButtonScrollUp" relativePoint="RIGHT"/>
				</Anchors>

				<Layers>
					<Layer level="OVERLAY">
						<Texture setAllPoints="true" file="Interface/AddOns/EasyRollTracker/rc/button-down.tga">
							<Color r="0.85" g="0.85" b="0.85" a="1.00"/>
						</Texture>
					</Layer>
				</Layers>
			</Button>

			<Button name="$parent_ButtonSettings" inherits="eRollTracker_Template_Button_Text">
				<Size x="24" y="24"/>
				<Anchors>
					<Anchor point="BOTTOM" y="14"/>
					<Anchor point="RIGHT" x="-34"/>
				</Anchors>

				<Layers>
					<Layer level="OVERLAY">
						<Texture setAllPoints="true" file="Interface/AddOns/EasyRollTracker/rc/button-settings.tga">
							<Color r="0.85" g="0.85" b="0.85" a="1.00"/>
						</Texture>
					</Layer>
				</Layers>
			</Button>

			<ScrollFrame name="$parent_ScrollFrame">
				<Anchors>
					<Anchor point="TOP" relativeTo="$parent_FrameItem" relativePoint="BOTTOM" y="-12"/>
					<Anchor point="BOTTOM" relativeTo="$parent_ButtonClear" relativePoint="TOP" y="6"/>
					<Anchor point="RIGHT" x="-8"/>
					<Anchor point="LEFT" x="8"/>
				</Anchors>

				<Layers>
					<Layer level="ARTWORK">
						<Texture setAllPoints="true">
							<Color r="0.05" g="0.05" b="0.05" a="0.80"/>
						</Texture>
					</Layer>
				</Layers>

				<ScrollChild>
					<Frame>

					</Frame>
				</ScrollChild>
			</ScrollFrame>
		</Frames>
	</Frame>
</Ui>